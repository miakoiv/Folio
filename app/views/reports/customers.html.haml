.content
  .row
    .col-md-8
      .hpanel
        .panel-heading= t('.by_age')
        .panel-body
          %canvas#customers-by-age
    .col-md-4
      .hpanel
        .panel-heading= t('.by_gender')
        .panel-body
          %canvas#customers-by-gender

:coffee
  new Chart $('#customers-by-age'),
    type: 'bar'
    data:
      labels: #{@by_age.labels.to_json}
      datasets: [
        $.extend {
          data: #{@by_age.data.to_json}
        }, Chart.defaults.colors.sequential
      ]
    options:
      scales:
        yAxes: [{
          ticks:
            beginAtZero: true
        }]

  new Chart $('#customers-by-gender'),
    type: 'pie'
    data:
      labels: #{@by_gender.labels.to_json}
      datasets: [
        $.extend {
          data: #{@by_gender.data.to_json}
        }, Chart.defaults.colors.qualitative
      ]
    options:
      cutoutPercentage: 50
